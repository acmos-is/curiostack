machine:
  services:
    - docker
  java:
    version: oraclejdk8

dependencies:
  cache_directories:
    # Gradle is very advanced now and we try to rely on its management of internal state for faster
    # builds. If this causes flaky builds, we can remove this caching.
    - .gradle
  override:
    # Running tests during the dependencies phase is the only way to have CircleCI cache everything
    # gradle downloads.
    - ./gradlew continuousTest

test:
  override:
    - echo "Test results are found in dependencies phase."
